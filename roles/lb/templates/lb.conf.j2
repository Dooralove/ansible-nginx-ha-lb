# roles/lb/templates/lb.conf.j2
# Managed by Ansible role: lb
# DO NOT EDIT MANUALLY â€” will be overwritten by Ansible.

server {
    listen {{ lb_listen_port }} default_server;
    server_name {{ lb_server_name }};

    location / {
        proxy_pass http://{{ lb_upstream_name }};
        proxy_http_version 1.1;
        proxy_set_header Connection "";
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_connect_timeout {{ lb_proxy_connect_timeout }};
        proxy_read_timeout {{ lb_proxy_read_timeout }};
        proxy_send_timeout {{ lb_proxy_send_timeout }};
        proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504;
    }

    access_log {{ lb_access_log_path }};
    error_log  {{ lb_error_log_path }};
}
